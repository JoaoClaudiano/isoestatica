<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Isostática Interativa</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
<style>
body { font-family: Arial, sans-serif; margin:0; background:#f0f4f8; color:#333; }
header { display:flex; justify-content:space-between; align-items:center; background:#005b96; color:white; padding:10px 20px; position: sticky; top:0; z-index:100; }
header h1 { margin:0; font-size:1.5em; }
#hamburger { font-size:28px; cursor:pointer; }

/* Sidebar esquerda (menu) */
#sidebar { height:100%; width:0; position:fixed; z-index:2000; top:0; left:0; background:#007acc; overflow-x:hidden; transition:0.3s; padding-top:60px; color:white; }
#sidebar a { padding:15px 20px; display:block; text-decoration:none; color:white; transition:0.2s; font-weight:bold;}
#sidebar a:hover { background:#005b96; }
#sidebar .closebtn { position:absolute; top:10px; right:15px; font-size:30px; cursor:pointer; }

/* Sidebar direita (elementos) */
#rightSidebar { position:fixed; top:60px; right:0; width:250px; height:calc(100% - 60px); background:#f9f9f9; border-left:1px solid #ccc; overflow-y:auto; padding:10px; display:none; z-index:1500; }
#rightSidebar h3 { margin-top:0; color:#005b96; }
#rightSidebar .element { border-bottom:1px solid #ccc; padding:5px; margin-bottom:5px; cursor:pointer; }
#rightSidebar .element:hover { background:#e0f0ff; }

#main { margin:10px 260px 10px 10px; }
#controls { display:flex; flex-wrap:wrap; gap:5px; margin-bottom:10px; }
#controls button { flex:1 1 auto; padding:8px; background:#007acc; color:white; border:none; border-radius:5px; cursor:pointer; font-weight:bold; }
#controls button:hover { background:#005b96; }

#canvasContainer { position:relative; width:100%; margin-bottom:10px; overflow:hidden; }
canvas { width:100%; height:400px; border:1px solid #999; background-image: radial-gradient(#ccc 1px, transparent 1px); background-size:20px 20px; display:block; }
#crosshair { position:absolute; width:20px; height:20px; pointer-events:none; border:1px solid red; border-radius:50%; transform:translate(-50%, -50%); }

.diagramSection { background:white; border-radius:8px; padding:10px; margin-bottom:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.diagramSection h3 { margin:0 0 5px 0; color:#005b96; }

#memoryCard { background:white; border-radius:8px; padding:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); margin-bottom:20px; }
#memoryCard h3 { color:#005b96; margin-top:0; }

footer { background:#005b96; color:white; text-align:center; padding:15px; font-size:0.9em; }
footer a { color:white; text-decoration:none; margin:0 5px; }
footer a:hover { text-decoration:underline; }

/* Responsivo */
@media(max-width:900px){
    #main { margin:10px 10px 10px 10px; }
    #rightSidebar { width:100%; height:200px; top:auto; bottom:0; display:none; border-left:none; border-top:1px solid #ccc; }
}
</style>
</head>
<body>

<header>
  <h1>Isostática Interativa</h1>
  <span id="hamburger">&#9776;</span>
</header>

<div id="sidebar">
  <span class="closebtn" onclick="closeSidebar()">&times;</span>
  <a href="aba/metodologia-vigas.html" target="_blank">Metodologia Vigas</a>
  <a href="aba/metodologia-trelicas.html" target="_blank">Metodologia Treliças</a>
  <a href="aba/sobre-nos.html" target="_blank">Sobre Nós</a>
  <a href="aba/contato.html" target="_blank">Contato</a>
</div>

<div id="rightSidebar">
  <h3>Elementos Criados</h3>
  <div id="elementList">Nenhum elemento ainda.</div>
</div>

<div id="main">

  <div id="controls">
    <button onclick="addNodePrompt()">Adicionar Nó/Apoio</button>
    <button onclick="startDrawBeam()">Desenhar Viga</button>
    <button onclick="addLoadPrompt()">Carga Concentrada</button>
    <button onclick="addDistLoadPrompt()">Carga Distribuída</button>
    <button onclick="addMomentPrompt()">Momento</button>
    <button onclick="addHingePrompt()">Rótula</button>
    <button onclick="resetStructure()">Resetar Estrutura</button>
    <button onclick="toggleEfforts()">Alternar Diagramas</button>
    <button onclick="toggleRightSidebar()">Elementos</button>
  </div>

  <div id="canvasContainer">
    <canvas id="canvas"></canvas>
    <div id="crosshair"></div>
  </div>

  <div class="diagramSection">
    <h3>Momento Fletor (M)</h3>
    <canvas id="momentDiagram" width="900" height="150"></canvas>
  </div>
  <div class="diagramSection">
    <h3>Cortante (V)</h3>
    <canvas id="shearDiagram" width="900" height="150"></canvas>
  </div>
  <div class="diagramSection">
    <h3>Normal (N)</h3>
    <canvas id="axialDiagram" width="900" height="150"></canvas>
  </div>

  <div id="memoryCard">
    <h3>Memória de cálculo das reações</h3>
    <div id="reactionMemory">Nenhuma reação calculada ainda.</div>
  </div>

</div>

<footer>
<p>© 2024 Isostática Interativa | Desenvolvido com ❤️ por [Nome da Equipe]</p>
<p>
<a href="pages/politica.html">Política de Privacidade</a> |
<a href="pages/termos.html">Termos de Uso</a> |
<a href="pages/ajuda.html">Ajuda</a> |
<a href="pages/contato.html">Contato</a>
</p>
</footer>

<script>
/* Sidebar */
const sidebar = document.getElementById("sidebar");
const hamburger = document.getElementById("hamburger");
hamburger.onclick = () => { sidebar.style.width="250px"; };
function closeSidebar() { sidebar.style.width="0"; }

const rightSidebar = document.getElementById("rightSidebar");
function toggleRightSidebar() { rightSidebar.style.display = rightSidebar.style.display==='block'?'none':'block'; }

/* Modelo estrutural */
const model = { nodes:[], elements:[], loads:[], hinges:[], supports:[] };
let nodeIdCounter = 1;
let tempNode = null; 
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const canvasContainer = document.getElementById('canvasContainer');
const crosshair = document.getElementById('crosshair');

canvas.addEventListener("mousemove", e => {
  const rect = canvas.getBoundingClientRect();
  crosshair.style.left = (e.clientX - rect.left) + "px";
  crosshair.style.top = (e.clientY - rect.top) + "px";
});

/* Funções de elementos */
function addNodePrompt() {
  const x = parseFloat(prompt("Informe X do nó (px):", "50"))||50;
  const y = parseFloat(prompt("Informe Y do nó (px):", "50"))||50;
  const node = {id:nodeIdCounter++, x, y};
  model.nodes.push(node);
  updateRightSidebar();
  draw();
}

function startDrawBeam() {
  canvas.onclick = e => {
    const rect = canvas.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const clickedNode = {id:nodeIdCounter++, x, y};
    model.nodes.push(clickedNode);
    if(!tempNode) {
      tempNode = clickedNode;
    } else {
      model.elements.push({n1: tempNode, n2: clickedNode});
      tempNode = null;
      canvas.onclick = null;
    }
    updateRightSidebar();
    draw();
  };
}

function addLoadPrompt() { alert("Adicionar carga concentrada."); }
function addDistLoadPrompt() { alert("Adicionar carga distribuída."); }
function addMomentPrompt() { alert("Adicionar momento."); }
function addHingePrompt() { alert("Adicionar rótula."); }
function resetStructure() { model.nodes=[]; model.elements=[]; model.loads=[]; model.hinges=[]; tempNode=null; updateRightSidebar(); updateMemoryCard(); draw(); }
function toggleEfforts() { alert("Alternar diagramas M,V,N"); }

/* Sidebar direita */
function updateRightSidebar() {
  const container = document.getElementById("elementList");
  if(model.nodes.length + model.elements.length === 0){ container.innerHTML="Nenhum elemento ainda."; return; }
  let html="";
  model.nodes.forEach(n=>html+=`<div class="element">Nó ${n.id} - (${n.x.toFixed(0)},${n.y.toFixed(0)})</div>`);
  model.elements.forEach((el,i)=>html+=`<div class="element">Viga ${i+1} - Nó ${el.n1.id} a Nó ${el.n2.id}</div>`);
  container.innerHTML=html;
}

/* Memória de cálculo (simulada) */
function updateMemoryCard() {
  const container = document.getElementById("reactionMemory");
  if(model.nodes.length===0){ container.innerHTML="Nenhuma reação calculada ainda."; return; }
  let html="<ul>";
  model.nodes.forEach(n=>html+=`<li>Nó ${n.id}: Fx=0 kN, Fy=0 kN, Mz=0 kN·m</li>`);
  html+="</ul>";
  container.innerHTML=html;
}

/* Desenho */
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  model.elements.forEach(el=>{
    ctx.strokeStyle="#007acc";
    ctx.lineWidth=3;
    ctx.beginPath();
    ctx.moveTo(el.n1.x, el.n1.y);
    ctx.lineTo(el.n2.x, el.n2.y);
    ctx.stroke();
  });
  model.nodes.forEach(n=>{
    ctx.fillStyle="#ff0000";
    ctx.beginPath();
    ctx.arc(n.x,n.y,5,0,2*Math.PI);
    ctx.fill();
  });
}
</script>

</body>
</html>
